/* 
 * File:   Tennis.h
 * Author: Fano
 *
 * Created on 3 de marzo de 2017, 0:52
 */

#ifndef TENNIS_H
#define	TENNIS_H

#include "GPUCore/GPUCore.h"
#include "IOCore/IOCore.h"

uint8_t player1_1;
uint8_t player1_2;
uint8_t player1_3;
uint8_t yPlayer1;
    
uint8_t player2_1;
uint8_t player2_2;
uint8_t player2_3;
uint8_t yPlayer2;
    
uint8_t ball;
uint8_t xBall;
uint8_t yBall;
int dirXBall;
int dirYBall;
uint8_t stop;
uint8_t select;
uint8_t option;
uint8_t demo;

void reset(){
    yPlayer1 = 15;
    yPlayer2 = 15;
    xBall = 19;
    yBall = 15;
    dirXBall = -2;
    dirYBall = -1;
    option = 42;
    demo = 0;
    
    GPU_spriteMove(player1_1, 4, 14);
    GPU_spriteMove(player1_2, 4, 15);
    GPU_spriteMove(player1_3, 4, 16);
    
    GPU_spriteMove(player2_1, 36, 14);
    GPU_spriteMove(player2_2, 36, 15);
    GPU_spriteMove(player2_3, 36, 16);
}

void game(){
        xBall+= dirXBall;
        yBall+= dirYBall;

        while(!GPU_spriteMove(ball, xBall, yBall)){
            if(yBall == 3){
                yBall = 4;
                dirYBall = 1;
            }
            if(yBall == 26){
                yBall = 25;
                dirYBall = -1;
            }
            if(xBall == 3){
                xBall = 4;
                dirYBall = 0;
                dirXBall = 0;
                stop = !stop;
                GPU_scroll(0,30);

            }
            if(xBall == 37){
                xBall = 36;
                dirXBall = 0;
                dirYBall = 0;
                stop = !stop;
                GPU_scroll(0,30);
            }
        }
        
        if(dirXBall == -2){
            if(yBall > yPlayer1){
                yPlayer1++;
                while(!GPU_spriteMove(player1_3, 4, yPlayer1 + 1))
                    yPlayer1--;
                GPU_spriteMove(player1_2, 4, yPlayer1);
                GPU_spriteMove(player1_1, 4, yPlayer1 - 1);
            }       
            if(yBall < yPlayer1){
                yPlayer1--;
                while(!GPU_spriteMove(player1_1, 4, yPlayer1 - 1))
                    yPlayer1++;
                GPU_spriteMove(player1_2, 4, yPlayer1);
                GPU_spriteMove(player1_3, 4, yPlayer1 + 1);
            }
        }
        if(demo){
            if(dirXBall == 2){
                if(yBall > yPlayer2){
                    yPlayer2++;
                    while(!GPU_spriteMove(player2_3, 36, yPlayer2 + 1))
                        yPlayer2--;
                    GPU_spriteMove(player2_2, 36, yPlayer2);
                    GPU_spriteMove(player2_1, 36, yPlayer2 - 1);
                }       
                if(yBall < yPlayer2){
                    yPlayer2--;
                    while(!GPU_spriteMove(player2_1, 36, yPlayer2 - 1))
                        yPlayer2++;
                    GPU_spriteMove(player2_2, 36, yPlayer2);
                    GPU_spriteMove(player2_3, 36, yPlayer2 + 1);
                }
            }
        }
        if(xBall==5){
            if((yBall <= yPlayer1 + 1 && yBall >= yPlayer1 - 1))
                dirXBall = 2;
            if((yBall == yPlayer1 + 2) && (dirYBall < 0)){
                dirXBall = 2;
                dirYBall = 1;
            }
            if((yBall == yPlayer1 - 2) && (dirYBall > 0)){
                dirXBall = 2;
                dirYBall = -1;
            }
        }
        
        if(xBall==35){
            if((yBall <= yPlayer2 + 1 && yBall >= yPlayer2 - 1))
                dirXBall = -2;
            if((yBall == yPlayer2 + 2) && (dirYBall < 0)){
                dirXBall = -2;
                dirYBall = 1;
            }
            if((yBall == yPlayer2 - 2) && (dirYBall > 0)){
                dirXBall = -2;
                dirYBall = -1;
            }
        }
}

void menu(){
    
}

void Tennis(){
    IO_init();
    GPU_init();
    uint8_t tiles[22][8][8] = {
        {{0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11},
        {0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11},
        {0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11},
        {0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11}}
        ,{{0x00, 0x02, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22},
        {0x22, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
        {0x22, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
        {0x22, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}
        ,{{0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x02, 0x00},
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x22, 0x22},
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x22, 0x22},
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x22, 0x22}}
        ,{{0x22, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
        {0x22, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
        {0x22, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
        {0x00, 0x20, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22}}
        ,{{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x22, 0x22},
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x22, 0x22},
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x22, 0x22},
        {0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x20, 0x00}}
        ,{{0x22, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
        {0x22, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
        {0x22, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
        {0x22, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}
        ,{{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x22, 0x22},
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x22, 0x22},
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x22, 0x22},
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x22, 0x22}}
        ,{{0x11, 0x11, 0x11, 0x22, 0x22, 0x11, 0x11, 0x11},
        {0x11, 0x11, 0x11, 0x22, 0x22, 0x11, 0x11, 0x11},
        {0x11, 0x11, 0x11, 0x22, 0x22, 0x11, 0x11, 0x11},
        {0x11, 0x11, 0x11, 0x22, 0x22, 0x11, 0x11, 0x11}}
        ,{{0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22},
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}
        ,{{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
        {0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22}}
        ,{{0x00, 0x00, 0x22, 0x22, 0x22, 0x22, 0x00, 0x00},
        {0x00, 0x00, 0x22, 0x22, 0x22, 0x22, 0x00, 0x00},
        {0x00, 0x00, 0x22, 0x22, 0x22, 0x22, 0x00, 0x00},
        {0x00, 0x00, 0x22, 0x22, 0x22, 0x22, 0x00, 0x00}}
        ,{{0x00, 0x04, 0x40, 0x22, 0x22, 0x44, 0x04, 0x00},
        {0x44, 0x42, 0x00, 0x22, 0x22, 0x44, 0x44, 0x44},
        {0x44, 0x44, 0x24, 0x22, 0x22, 0x44, 0x44, 0x44},
        {0x00, 0x40, 0x44, 0x22, 0x22, 0x44, 0x40, 0x00}}
        // - CARACTERES -
        // "M"
        ,{{0x02, 0x22, 0x22, 0x22, 0x22, 0x22, 0x02, 0x00},
        {0x22, 0x22, 0x20, 0x22, 0x22, 0x20, 0x22, 0x00},
        {0x22, 0x22, 0x00, 0x22, 0x22, 0x00, 0x22, 0x00},
        {0x22, 0x22, 0x00, 0x22, 0x22, 0x00, 0x22, 0x00}}
        // "S"
        ,{{0x02, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x00},
        {0x22, 0x22, 0x02, 0x02, 0x02, 0x02, 0x00, 0x00},
        {0x00, 0x20, 0x20, 0x20, 0x20, 0x22, 0x22, 0x00},
        {0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x20, 0x00}}
        // "E"
        ,{{0x02, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x00},
        {0x22, 0x22, 0x22, 0x02, 0x02, 0x02, 0x02, 0x00},
        {0x22, 0x22, 0x22, 0x20, 0x20, 0x20, 0x20, 0x00},
        {0x20, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x00}}
        // "N"
        ,{{0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x02, 0x00},
        {0x22, 0x22, 0x22, 0x00, 0x00, 0x22, 0x22, 0x00},
        {0x22, 0x22, 0x22, 0x00, 0x00, 0x22, 0x22, 0x00},
        {0x22, 0x22, 0x22, 0x00, 0x00, 0x22, 0x22, 0x00}}
        // "U"
        ,{{0x22, 0x22, 0x22, 0x00, 0x00, 0x22, 0x22, 0x00},
        {0x22, 0x22, 0x22, 0x00, 0x00, 0x22, 0x22, 0x00},
        {0x22, 0x22, 0x22, 0x00, 0x00, 0x22, 0x22, 0x00},
        {0x20, 0x22, 0x22, 0x22, 0x22, 0x22, 0x20, 0x00}}
        // "A"
        ,{{0x02, 0x22, 0x22, 0x22, 0x22, 0x22, 0x02, 0x00},
        {0x22, 0x22, 0x22, 0x00, 0x00, 0x22, 0x22, 0x00},
        {0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x00},
        {0x22, 0x22, 0x22, 0x00, 0x00, 0x22, 0x22, 0x00}}
        // "T"
        ,{{0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x00},
        {0x00, 0x00, 0x22, 0x22, 0x22, 0x00, 0x00, 0x00},
        {0x00, 0x00, 0x22, 0x22, 0x22, 0x00, 0x00, 0x00},
        {0x00, 0x00, 0x22, 0x22, 0x22, 0x00, 0x00, 0x00}}
        // "R"
        ,{{0x02, 0x22, 0x22, 0x22, 0x22, 0x22, 0x02, 0x00},
        {0x22, 0x22, 0x22, 0x00, 0x00, 0x22, 0x22, 0x00},
        {0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x02, 0x00},
        {0x22, 0x22, 0x22, 0x00, 0x00, 0x22, 0x22, 0x00}}
        // "I"
        ,{{0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x00},
        {0x00, 0x00, 0x22, 0x22, 0x22, 0x00, 0x00, 0x00},
        {0x00, 0x00, 0x22, 0x22, 0x22, 0x00, 0x00, 0x00},
        {0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x00}}
        // "X"
        ,{{0x22, 0x22, 0x22, 0x00, 0x00, 0x22, 0x22, 0x00},
        {0x20, 0x22, 0x22, 0x02, 0x02, 0x22, 0x20, 0x00},
        {0x02, 0x22, 0x22, 0x20, 0x20, 0x22, 0x02, 0x00},
        {0x22, 0x22, 0x22, 0x00, 0x00, 0x22, 0x22, 0x00}}
    };

    uint8_t palettes[1][16][3] = {{{0x00, 0x00, 0x00}, {0x00, 0x00, 0x00}, {0xFF, 0xFF, 0xFF}, {0xFF, 0xFF, 0xFF}, {0xFF, 0xFF, 0xFF}, {0xFF, 0xFF, 0xFF}, {0xFF, 0xFF, 0xFF}, {0xFF, 0xFF, 0xFF}, {0xFF, 0xFF, 0xFF}, {0xFF, 0xFF, 0xFF}, {0xFF, 0xFF, 0xFF}, {0xFF, 0xFF, 0xFF}, {0xFF, 0xFF, 0xFF}, {0xFF, 0xFF, 0xFF}, {0xFF, 0xFF, 0xFF}, {0xFF, 0xFF, 0xFF}}};

    int k;
    for(k = 0; k < 22; k++){
        Tile tile = GPU_newTile(tiles[k]);
        GPU_loadTile(&tile, k, 1);
    }
    for(k = 0; k < 1; k++){
        Palette palette = GPU_newPalette(palettes[k]);
        GPU_loadPalette(&palette, k, 1);
    }
    
    uint8_t back = GPU_addStatic(0, 1, 0, 0, 1);
    uint8_t corner1 = GPU_addStatic(1, 1, 0, 0, 0);
    uint8_t corner2 = GPU_addStatic(2, 1, 0, 0, 0);
    uint8_t corner3 = GPU_addStatic(3, 1, 0, 0, 0);
    uint8_t corner4 = GPU_addStatic(4, 1, 0, 0, 0);
    uint8_t line1 = GPU_addStatic(5, 1, 0, 0, 0);
    uint8_t line2 = GPU_addStatic(6, 1, 0, 0, 0);
    uint8_t line3 = GPU_addStatic(7, 1, 0, 0, 1);
    uint8_t line4 = GPU_addStatic(8, 1, 0, 0, 0);
    uint8_t line5 = GPU_addStatic(9, 1, 0, 0, 0);
    uint8_t wordsM = GPU_addStatic(12, 1, 0, 0, 0);
    uint8_t wordsS = GPU_addStatic(13, 1, 0, 0, 0);
    uint8_t wordsE = GPU_addStatic(14, 1, 0, 0, 0);
    uint8_t wordsN = GPU_addStatic(15, 1, 0, 0, 0);
    uint8_t wordsU = GPU_addStatic(16, 1, 0, 0, 0);
    uint8_t wordsA = GPU_addStatic(17, 1, 0, 0, 0);
    uint8_t wordsT = GPU_addStatic(18, 1, 0, 0, 0);
    uint8_t wordsR = GPU_addStatic(19, 1, 0, 0, 0);
    uint8_t wordsI = GPU_addStatic(20, 1, 0, 0, 0);
    uint8_t wordsX = GPU_addStatic(21, 1, 0, 0, 0);
    
    uint8_t tilesMap[60][40] = 
    {{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 8, 8, 8, 8, 8, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, 7, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 1, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 2, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 3, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 4, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 1, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 2, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, wordsM, wordsE, wordsN, wordsU, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 9, 9, 9, 9, 9, 9, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, wordsS, wordsT, wordsA, wordsR, wordsT, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, wordsE, wordsX, wordsI, wordsT, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0},
    {0, 0, 0, 3, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 4, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}};
    GPU_loadMap(&tilesMap[0][0], 60, 40);
    
    player1_1 = GPU_addSprite(10, 1, 1);
    player1_2 = GPU_addSprite(10, 1, 1);
    player1_3 = GPU_addSprite(10, 1, 1);
    player2_1 = GPU_addSprite(10, 1, 1);
    player2_2 = GPU_addSprite(10, 1, 1);
    player2_3 = GPU_addSprite(10, 1, 1);
    ball = GPU_addSprite(11, 1, 1);
    select = GPU_addSprite(11, 1, 1);
    
    reset();  
    stop = 1;
    GPU_scroll(0, 30);
    GPU_run();
}

void GPU_controller(){
    if(!stop)
        game();
    else
        menu();
}

void IO_listener(){
    if(!stop && !demo){
        if(EVENT_BUTTON_1){
            yPlayer2--;
            while(!GPU_spriteMove(player2_1, 36, yPlayer2 - 1))
                yPlayer2++;
            GPU_spriteMove(player2_2, 36, yPlayer2);
            GPU_spriteMove(player2_3, 36, yPlayer2 + 1);
        }
        if(EVENT_BUTTON_0){
            yPlayer2++;
            while(!GPU_spriteMove(player2_3, 36, yPlayer2 + 1))
                yPlayer2--;
            GPU_spriteMove(player2_2, 36, yPlayer2);
            GPU_spriteMove(player2_1, 36, yPlayer2 - 1);
        }
    }
    else{
        if(EVENT_BUTTON_1){
            option = 42;
        }
        if(EVENT_BUTTON_0){
            option = 45;
        }
        GPU_spriteMove(select, 16, option);
    }
}

void IO_interrupt(){
    if(!stop){
        GPU_scroll(0,30);
    }
    else{
        if(option == 42){
            reset();
        }
        if(option == 45){
            reset();
            demo = 1;
        }
        GPU_scroll(0,-30);
    }
    stop = !stop;
}

#endif	/* TENNIS_H */

